"use strict";(self.webpackChunkgithub_browser=self.webpackChunkgithub_browser||[]).push([[353],{4353:(H,u,i)=>{i.r(u),i.d(u,{CommitModule:()=>q});var T=i(8583),s=i(2789),d=i(4457),c=i(4655),v=i(5319),b=i(5435),r=i(8002),g=i(3342),x=i(3190);const l="repoName";class p{constructor(a,n){this.count=a,this.items=n}}var t=i(7716),D=i(3258);let C=(()=>{class e{constructor(n){this.apiService=n}getCommits(n,o){return this.apiService.getCommits(n,o).pipe((0,r.U)(m=>({count:m.length,items:m.map(w)})))}searchCommits(n,o){return this.apiService.searchCommits(n,o).pipe((0,r.U)(m=>({count:m.total_count,items:m.items.map(Z)})))}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(D.Ve))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})();function Z(e){return{name:e.commit.author.name,url:e.html_url,message:e.commit.message}}function w(e){return{name:e.commit.author.name,url:e.html_url,message:e.commit.message}}var M=i(938),S=i(5145),y=i(9727);function O(e,a){1&e&&(t.TgZ(0,"th",15),t._uU(1,"Link"),t.qZA())}function P(e,a){if(1&e&&(t.TgZ(0,"td",16),t.TgZ(1,"a",17),t._uU(2,"Open"),t.qZA(),t.qZA()),2&e){const n=a.$implicit;t.xp6(1),t.s9C("href",n.url,t.LSH)}}function A(e,a){1&e&&(t.TgZ(0,"th",18),t._uU(1,"Name"),t.qZA())}function _(e,a){if(1&e&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&e){const n=a.$implicit;t.xp6(1),t.Oqu(n.name)}}function U(e,a){1&e&&(t.TgZ(0,"th",20),t._uU(1,"Message"),t.qZA())}function N(e,a){if(1&e&&(t.TgZ(0,"td",21),t.TgZ(1,"div"),t._uU(2),t.qZA(),t.qZA()),2&e){const n=a.$implicit;t.xp6(2),t.hij(" ",n.message," ")}}function R(e,a){if(1&e&&(t.TgZ(0,"td",22),t._uU(1," No records found. "),t.qZA()),2&e){const n=t.oxw();t.uIk("colspan",n.columns.length)}}function Q(e,a){1&e&&t._UZ(0,"tr",23)}function F(e,a){1&e&&t._UZ(0,"tr",24)}function Y(e,a){if(1&e&&t._UZ(0,"tr",25),2&e){const n=t.oxw();t.Q6J("hidden",0!==n.dataSource.length)}}const B=function(){return["noData"]};let J=(()=>{class e{constructor(){this.columns=["url","name","message"],this.dataSource=[]}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-commit-table"]],inputs:{dataSource:"dataSource"},decls:15,vars:5,consts:[["mat-table","",3,"dataSource"],["matColumnDef","url"],["mat-header-cell","","class","url-cell",4,"matHeaderCellDef"],["mat-cell","","class","url-cell",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","","class","name-cell",4,"matHeaderCellDef"],["mat-cell","","class","name-cell",4,"matCellDef"],["matColumnDef","message"],["mat-header-cell","","class","message-cell",4,"matHeaderCellDef"],["mat-cell","","class","message-cell",4,"matCellDef"],["matColumnDef","noData"],["class","text-align-center","mat-footer-cell","",4,"matFooterCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",3,"hidden",4,"matFooterRowDef"],["mat-header-cell","",1,"url-cell"],["mat-cell","",1,"url-cell"],["target","_blank",1,"url",3,"href"],["mat-header-cell","",1,"name-cell"],["mat-cell","",1,"name-cell"],["mat-header-cell","",1,"message-cell"],["mat-cell","",1,"message-cell"],["mat-footer-cell","",1,"text-align-center"],["mat-header-row",""],["mat-row",""],["mat-footer-row","",3,"hidden"]],template:function(n,o){1&n&&(t.TgZ(0,"table",0),t.ynx(1,1),t.YNc(2,O,2,0,"th",2),t.YNc(3,P,3,1,"td",3),t.BQk(),t.ynx(4,4),t.YNc(5,A,2,0,"th",5),t.YNc(6,_,2,1,"td",6),t.BQk(),t.ynx(7,7),t.YNc(8,U,2,0,"th",8),t.YNc(9,N,3,1,"td",9),t.BQk(),t.ynx(10,10),t.YNc(11,R,2,1,"td",11),t.BQk(),t.YNc(12,Q,1,0,"tr",12),t.YNc(13,F,1,0,"tr",13),t.YNc(14,Y,1,1,"tr",14),t.qZA()),2&n&&(t.Q6J("dataSource",o.dataSource),t.xp6(12),t.Q6J("matHeaderRowDef",o.columns),t.xp6(1),t.Q6J("matRowDefColumns",o.columns),t.xp6(1),t.Q6J("matFooterRowDef",t.DdM(4,B)))},directives:[s.BZ,s.w1,s.fO,s.Dz,s.mD,s.as,s.nj,s.Ke,s.ge,s.ev,s.yh,s.XQ,s.Gk,s.Q2],styles:["@media (max-width: 414px){.url-cell[_ngcontent-%COMP%]{width:100px}.name-cell[_ngcontent-%COMP%]{width:150px}.message-cell[_ngcontent-%COMP%]{flex:1;max-width:30vw}.message-cell[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.message-cell[_ngcontent-%COMP%]{display:none}}@media (min-width: 415px){.url-cell[_ngcontent-%COMP%]{width:100px}.name-cell[_ngcontent-%COMP%]{width:150px}.message-cell[_ngcontent-%COMP%]{flex:1;max-width:30vw}.message-cell[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}}.mat-row[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{border-bottom:1px solid transparent;border-top:1px solid transparent;cursor:pointer}.mat-row[_ngcontent-%COMP%]:hover   .mat-cell[_ngcontent-%COMP%]{border-color:currentColor}.mat-row[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{cursor:default}table[_ngcontent-%COMP%]{width:100%}.text-align-center[_ngcontent-%COMP%]{text-align:center}"],changeDetection:0}),e})(),f=(()=>{class e{constructor(n,o,m){this.commitService=n,this.route=o,this.cdr=m,this.perPageRecordsCount=10,this.commits=new p(0,[]),this.subscriptions=new v.w,this.isSearch=!1}ngOnInit(){this.getCommitsByUrlParam()}searchTextChange(n){this.query=n,this.search(this.query)}pageChange(n){this.isSearch?this.searchCommits(this.query,n.pageIndex+1).pipe(this.bind()).subscribe(()=>this.cdr.markForCheck()):this.getCommits(this.repo,n.pageIndex+1).pipe(this.bind()).subscribe(()=>this.cdr.markForCheck())}ngOnDestroy(){this.subscriptions.unsubscribe()}getCommitsByUrlParam(){const n=this.route.paramMap.pipe((0,b.h)(o=>o.has(l))).pipe((0,r.U)(o=>o.get(l))).pipe((0,g.b)(o=>this.repo=null!=o?o:"")).pipe((0,x.w)(()=>this.getCommits(this.repo))).pipe(this.bind()).subscribe(()=>this.cdr.markForCheck());this.subscriptions.add(n)}search(n){if(n&&""!==n){const o=this.createQuery(n),m=this.searchCommits(o).pipe(this.bind()).subscribe(()=>this.cdr.markForCheck());this.subscriptions.add(m),this.isSearch=!0}else if(this.repo){const o=this.getCommits(this.repo).pipe(this.bind()).subscribe(()=>this.cdr.markForCheck());this.subscriptions.add(o),this.isSearch=!1}else this.commits=new p(0,[])}searchCommits(n,o=1){return this.commitService.searchCommits(n,o)}getCommits(n,o=1){return this.commitService.getCommits(n,o)}createQuery(n){return this.repo?`repo:${this.repo}+${n}`:n}bind(){return(0,g.b)(n=>this.commits=new p(n.count,n.items))}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(C),t.Y36(c.gz),t.Y36(t.sBO))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-commit-list"]],decls:9,vars:4,consts:[[3,"searchTextChange"],[3,"dataSource"],[3,"length","pageSize","page"]],template:function(n,o){1&n&&(t.TgZ(0,"app-ui-container"),t.TgZ(1,"app-navigation"),t._uU(2),t.qZA(),t.TgZ(3,"div"),t.TgZ(4,"app-search",0),t.NdJ("searchTextChange",function(h){return o.searchTextChange(h)}),t.qZA(),t.qZA(),t.TgZ(5,"div"),t._UZ(6,"app-commit-table",1),t.qZA(),t.TgZ(7,"div"),t.TgZ(8,"mat-paginator",2),t.NdJ("page",function(h){return o.pageChange(h)}),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(2),t.hij(" Commits ",o.repo," "),t.xp6(4),t.Q6J("dataSource",o.commits.items),t.xp6(2),t.Q6J("length",o.commits.count)("pageSize",o.perPageRecordsCount))},directives:[M.i,S.J,y.g,J,d.NW],styles:[".main-component-container[_ngcontent-%COMP%]{margin-left:200px;margin-right:200px}"],changeDetection:0}),e})();const L=[{path:"",component:f,pathMatch:"full"},{path:`:${l}`,component:f}];let z=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[c.Bz.forChild(L)],c.Bz]}),e})();var k=i(4466);let q=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[C],imports:[[T.ez,z,k.m,s.p0,d.TU]]}),e})()}}]);