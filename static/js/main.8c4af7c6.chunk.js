(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{15:function(e,t,n){},17:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),i=n(8),a=n.n(i),s=(n(15),n(5)),o=n(2),d=n(10);var u="photos",j=function(){var e=sessionStorage.getItem(u);return e?JSON.parse(e):null},f=function(e){sessionStorage.setItem(u,JSON.stringify(e))},l=function(e,t,n){n?function(e,t){var n=j();n?(n=[].concat(Object(s.a)(n),[{serverId:e,photoId:t}]),f(n)):f([{serverId:e,photoId:t}])}(e,t):function(e,t){var n=j();if(n){var c=n.findIndex((function(n){return n.serverId===e&&n.photoId===t}));-1!==c&&(n.splice(c,1),f(n))}}(e,t)};function b(e,t){var n=Object(c.useState)(!1),r=Object(o.a)(n,2),i=r[0],a=r[1];Object(c.useEffect)((function(){var n=function(e,t){var n=j();return!!n&&!!(n&&n.length>0)&&n.some((function(n){return n.serverId===e&&n.photoId===t}))}(e,t);a(n)}),[i,e,t]);return[i,function(){l(e,t,!i),a(!i)}]}var v=function(e,t,n,c){return"https://live.staticflickr.com/".concat(e,"/").concat(t,"_").concat(n,"_").concat(c,".jpg")},h=n(9),p=n.n(h),O=n(0);function m(e){var t=e.serverId,n=e.photoId,c=e.secret,r=e.title,i=[{media:"(min-width: 310px) and (max-width: 420px)",size:"q"},{media:"(min-width: 421px) and (max-width: 768px)",size:"n"},{media:"(min-width: 769px) and (max-width: 1366px)",size:"w"},{media:"(min-width: 1367px)",size:"z"}].map((function(e){return{media:e.media,src:v(t,n,c,e.size)}})).map((function(e){return Object(O.jsx)("source",{srcSet:e.src,media:e.media},e.media)})),a=v(t,n,c,"z");return Object(O.jsxs)("picture",{className:p.a.card_picture,children:[i,Object(O.jsx)("img",{src:a,alt:r,loading:"lazy"})]})}var x=Object(c.memo)(m);n(17);function g(e){var t=e.serverId,n=e.photoId,c=e.secret,r=e.title,i=e.owner,a=b(t,n),s=Object(o.a)(a,2),d=s[0],u=s[1],j=Object(O.jsx)("div",{className:"card-overlay",children:Object(O.jsxs)("div",{className:"card-info-container",children:[Object(O.jsx)("div",{className:"title",children:r}),Object(O.jsx)("hr",{className:"line-break"}),Object(O.jsx)("div",{className:"owner",children:i}),Object(O.jsx)("button",{className:"favourite-btn",onClick:function(){u()},children:d?"Unfavourite":"Favourite"})]})});return Object(O.jsxs)("div",{className:"card-outer-container",children:[Object(O.jsx)("div",{className:"card-inner-container",children:Object(O.jsx)(x,{serverId:t,photoId:n,secret:c,title:r})}),j]})}var _=n(3),I=n.n(_);function w(e){var t=e.perPageCount,n=Object(c.useState)(0),r=Object(o.a)(n,2),i=r[0],a=r[1],u=Object(c.useState)([]),j=Object(o.a)(u,2),f=j[0],l=j[1],b=Object(c.useRef)(null),v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(c.useState)(null),r=Object(o.a)(n,2),i=r[0],a=r[1],s=Object(c.useState)(!1),u=Object(o.a)(s,2),j=u[0],f=u[1],l=Object(c.useRef)(new IntersectionObserver((function(e){var t=e[0].isIntersecting;f(t)}),Object(d.a)({},t)));return Object(c.useEffect)((function(){a(e.current)}),[e]),Object(c.useEffect)((function(){if(i){var e=l.current;return e.observe(i),function(){return e.disconnect()}}}),[i]),j}(b,{threshold:0});return Object(c.useEffect)((function(){v&&(a(i+1),function(e,t){var n=function(e,t,n){return"https://www.flickr.com/services/rest/?method=flickr.photos.getRecent"+"&api_key=".concat("8808028abf5ea034d0492b2c5d5d9151")+"&per_page=".concat(t)+"&page=".concat(n)+"&format=json&nojsoncallback=1"}(0,t,e);return fetch(n).then((function(e){return e.json()}))}(i,t).then((function(e){l([].concat(Object(s.a)(f),Object(s.a)(e.photos.photo)))})))}),[v,t]),Object(O.jsxs)("div",{className:I.a.outer_grid,children:[Object(O.jsx)("div",{className:I.a.side}),Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{className:I.a.grid,children:Object(O.jsx)(N,{photos:f})}),Object(O.jsx)("div",{ref:b,className:I.a.loading,children:"Loading..."})]}),Object(O.jsx)("div",{className:I.a.side})]})}function N(e){var t=e.photos;return Object(O.jsx)(O.Fragment,{children:t.map((function(e,t){return Object(O.jsx)(g,{serverId:e.server,photoId:e.id,secret:e.secret,title:e.title,owner:e.owner},"".concat(e.server,"_").concat(e.id,"_").concat(t))}))})}var S=function(){return Object(O.jsx)("main",{children:Object(O.jsx)(w,{perPageCount:20})})},k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,19)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),i(e),a(e)}))};a.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(S,{})}),document.getElementById("root")),k()},3:function(e,t,n){e.exports={outer_grid:"Grid_outer_grid__2VCtP",grid:"Grid_grid__2JUWQ",side:"Grid_side__214kV",loading:"Grid_loading__3FwLn"}},9:function(e,t,n){e.exports={card_picture:"Picture_card_picture__2Dvzj"}}},[[18,1,2]]]);
//# sourceMappingURL=main.8c4af7c6.chunk.js.map