(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{10:function(e,t,n){e.exports={card_picture:"Picture_card_picture__2Dvzj"}},16:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(9),i=n.n(a),o=(n(16),n(6)),s=n(2),d=n(11);var u="photos",j=function(){var e=sessionStorage.getItem(u);return e?JSON.parse(e):null},l=function(e){sessionStorage.setItem(u,JSON.stringify(e))},_=function(e,t,n){n?function(e,t){var n=j();n?(n=[].concat(Object(o.a)(n),[{serverId:e,photoId:t}]),l(n)):l([{serverId:e,photoId:t}])}(e,t):function(e,t){var n=j();if(n){var r=n.findIndex((function(n){return n.serverId===e&&n.photoId===t}));-1!==r&&(n.splice(r,1),l(n))}}(e,t)};function f(e,t){var n=Object(r.useState)(!1),c=Object(s.a)(n,2),a=c[0],i=c[1];Object(r.useEffect)((function(){var n=function(e,t){var n=j();return!!n&&!!(n&&n.length>0)&&n.some((function(n){return n.serverId===e&&n.photoId===t}))}(e,t);i(n)}),[a,e,t]);return[a,function(){_(e,t,!a),i(!a)}]}var b=function(e,t,n,r){return"https://live.staticflickr.com/".concat(e,"/").concat(t,"_").concat(n,"_").concat(r,".jpg")},v=n(10),p=n.n(v),h=n(0);function m(e){var t=e.serverId,n=e.photoId,r=e.secret,c=e.title,a=[{media:"(min-width: 310px) and (max-width: 420px)",size:"q"},{media:"(min-width: 421px) and (max-width: 768px)",size:"n"},{media:"(min-width: 769px) and (max-width: 1366px)",size:"w"},{media:"(min-width: 1367px)",size:"z"}].map((function(e){return{media:e.media,src:b(t,n,r,e.size)}})).map((function(e){return Object(h.jsx)("source",{srcSet:e.src,media:e.media},e.media)})),i=b(t,n,r,"z");return Object(h.jsxs)("picture",{className:p.a.card_picture,children:[a,Object(h.jsx)("img",{src:i,alt:c,loading:"lazy"})]})}var O=Object(r.memo)(m),x=n(3),g=n.n(x);function I(e){var t=e.serverId,n=e.photoId,r=e.secret,c=e.title,a=e.owner,i=f(t,n),o=Object(s.a)(i,2),d=o[0],u=o[1],j=Object(h.jsx)("div",{className:g.a.card_overlay,children:Object(h.jsxs)("div",{className:g.a.card_info_container,children:[Object(h.jsx)("div",{className:g.a.title,children:c}),Object(h.jsx)("hr",{className:g.a.line_break}),Object(h.jsx)("div",{className:g.a.owner,children:a}),Object(h.jsx)("button",{className:g.a.favourite_btn,onClick:function(){u()},children:d?"Unfavourite":"Favourite"})]})});return Object(h.jsxs)("div",{className:g.a.card_outer_container,children:[Object(h.jsx)("div",{className:g.a.card_inner_container,children:Object(h.jsx)(O,{serverId:t,photoId:n,secret:r,title:c})}),j]})}var w=n(4),N=n.n(w);function C(e){var t=e.perPageCount,n=Object(r.useRef)(0),c=Object(r.useState)([]),a=Object(s.a)(c,2),i=a[0],u=a[1],j=Object(r.useRef)(null),l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(r.useState)(null),c=Object(s.a)(n,2),a=c[0],i=c[1],o=Object(r.useState)(!1),u=Object(s.a)(o,2),j=u[0],l=u[1],_=Object(r.useRef)(new IntersectionObserver((function(e){var t=e[0].isIntersecting;l(t)}),Object(d.a)({},t)));return Object(r.useEffect)((function(){i(e.current)}),[e]),Object(r.useEffect)((function(){if(a){var e=_.current;return e.observe(a),function(){return e.disconnect()}}}),[a]),j}(j,{threshold:0});return Object(r.useEffect)((function(){l&&(n.current=n.current+1,function(e,t){var n=function(e,t,n){return"https://www.flickr.com/services/rest/?method=flickr.photos.getRecent"+"&api_key=".concat("8808028abf5ea034d0492b2c5d5d9151")+"&per_page=".concat(t)+"&page=".concat(n)+"&format=json&nojsoncallback=1"}(0,t,e);return fetch(n).then((function(e){return e.json()}))}(n.current,t).then((function(e){u((function(t){return[].concat(Object(o.a)(t),Object(o.a)(e.photos.photo))}))})))}),[l,t]),Object(h.jsxs)("div",{className:N.a.outer_grid,children:[Object(h.jsx)("div",{className:N.a.side}),Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:N.a.grid,children:Object(h.jsx)(k,{photos:i})}),Object(h.jsx)("div",{ref:j,className:N.a.loading,children:"Loading..."})]}),Object(h.jsx)("div",{className:N.a.side})]})}function k(e){var t=e.photos;return Object(h.jsx)(h.Fragment,{children:t.map((function(e,t){return Object(h.jsx)(I,{serverId:e.server,photoId:e.id,secret:e.secret,title:e.title,owner:e.owner},"".concat(e.server,"_").concat(e.id,"_").concat(t))}))})}var y=function(){return Object(h.jsx)("main",{children:Object(h.jsx)(C,{perPageCount:20})})},S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,19)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),a(e),i(e)}))};i.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(y,{})}),document.getElementById("root")),S()},3:function(e,t,n){e.exports={card_outer_container:"Card_card_outer_container__3Uy5j",card_overlay:"Card_card_overlay__3yGl3",card_info_container:"Card_card_info_container__2ZZ8N",title:"Card_title__1pIlc",line_break:"Card_line_break__3Ql7p",owner:"Card_owner__3FCWj",favourite_btn:"Card_favourite_btn__2y_g7"}},4:function(e,t,n){e.exports={outer_grid:"Grid_outer_grid__2VCtP",grid:"Grid_grid__2JUWQ",side:"Grid_side__214kV",loading:"Grid_loading__3FwLn"}}},[[18,1,2]]]);
//# sourceMappingURL=main.999c5010.chunk.js.map